import{R as H,p as Y,q as Z,u as G,$ as O,y as D,v as J,a as s,c as ee,l as te,g as ne,r as j,s as C,x as ae,b as le,h as b,Z as ue,A as re}from"./index-DeiIrTy2.js";import{Q as K}from"./QIcon-Djlihzrp.js";import{Q as ie}from"./QSpinner-Dds-KyuN.js";import{u as oe,a as se}from"./use-size-DH-968SH.js";import{b as ce,a as de}from"./use-router-link-DXxVKtEh.js";import{c as fe}from"./_plugin-vue_export-helper-DKCp7DfC.js";function ve(e,t){const n=e.style;for(const e in t)n[e]=t[e]}function Pe(e){if(null==e)return;if("string"==typeof e)try{return document.querySelector(e)||void 0}catch{return}const t=H(e);return t?t.$el||t:void 0}function be(e,t=250){let n,a=!1;return function(){return!1===a&&(a=!0,setTimeout((()=>{a=!1}),t),n=e.apply(this,arguments)),n}}function N(e,t,n,a){!0===n.modifiers.stop&&D(e);const l=n.modifiers.color;let o=n.modifiers.center;o=!0===o||!0===a;const s=document.createElement("span"),i=document.createElement("span"),r=J(e),{left:u,top:c,width:d,height:v}=t.getBoundingClientRect(),p=Math.sqrt(d*d+v*v),b=p/2,f=(d-p)/2+"px",m=o?f:r.left-u-b+"px",g=(v-p)/2+"px",y=o?g:r.top-c-b+"px";i.className="q-ripple__inner",ve(i,{height:`${p}px`,width:`${p}px`,transform:`translate3d(${m},${y},0) scale3d(.2,.2,1)`,opacity:0}),s.className="q-ripple"+(l?" text-"+l:""),s.setAttribute("dir","ltr"),s.appendChild(i),t.appendChild(s);const h=()=>{s.remove(),clearTimeout(k)};n.abort.push(h);let k=setTimeout((()=>{i.classList.add("q-ripple__inner--enter"),i.style.transform=`translate3d(${f},${g},0) scale3d(1,1,1)`,i.style.opacity=.2,k=setTimeout((()=>{i.classList.remove("q-ripple__inner--enter"),i.classList.add("q-ripple__inner--leave"),i.style.opacity=0,k=setTimeout((()=>{s.remove(),n.abort.splice(n.abort.indexOf(h),1)}),275)}),250)}),50)}function Q(e,{modifiers:t,value:n,arg:a}){const l=Object.assign({},e.cfg.ripple,t,n);e.modifiers={early:!0===l.early,stop:!0===l.stop,center:!0===l.center,color:l.color||a,keyCodes:[].concat(l.keyCodes||13)}}const me=Y({name:"ripple",beforeMount(e,t){const n=t.instance.$.appContext.config.globalProperties.$q.config||{};if(!1===n.ripple)return;const a={cfg:n,enabled:!1!==t.value,modifiers:{},abort:[],start(t){!0===a.enabled&&!0!==t.qSkipRipple&&t.type===(!0===a.modifiers.early?"pointerdown":"click")&&N(t,e,a,!0===t.qKeyEvent)},keystart:be((t=>{!0===a.enabled&&!0!==t.qSkipRipple&&!0===O(t,a.modifiers.keyCodes)&&t.type==="key"+(!0===a.modifiers.early?"down":"up")&&N(t,e,a,!0)}),300)};Q(a,t),e.__qripple=a,G(a,"main",[[e,"pointerdown","start","passive"],[e,"click","start","passive"],[e,"keydown","keystart","passive"],[e,"keyup","keystart","passive"]])},updated(e,t){if(t.oldValue!==t.value){const n=e.__qripple;void 0!==n&&(n.enabled=!1!==t.value,!0===n.enabled&&Object(t.value)===t.value&&Q(n,t))}},beforeUnmount(e){const t=e.__qripple;void 0!==t&&(t.abort.forEach((e=>{e()})),Z(t,"main"),delete e._qripple)}}),F={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},ge=Object.keys(F),ye={align:{type:String,validator:e=>ge.includes(e)}};function he(e){return s((()=>{const t=void 0===e.align?!0===e.vertical?"stretch":"left":e.align;return`${!0===e.vertical?"items":"justify"}-${F[t]}`}))}const z={none:0,xs:4,sm:8,md:16,lg:24,xl:32},ke={xs:8,sm:10,md:14,lg:20,xl:24},pe=["button","submit","reset"],qe=/[^\s]\/[^\s]/,xe=["flat","outline","push","unelevated"];function Ee(e,t){return!0===e.flat?"flat":!0===e.outline?"outline":!0===e.push?"push":!0===e.unelevated?"unelevated":t}const Ce={...oe,...ce,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...xe.reduce(((e,t)=>(e[t]=Boolean)&&e),{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...ye.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},Le={...Ce,round:Boolean};function we(e){const t=se(e,ke),n=he(e),{hasRouterLink:a,hasLink:l,linkTag:o,linkAttrs:i,navigateOnClick:r}=de({fallbackTag:"button"}),u=s((()=>{const n=!1===e.fab&&!1===e.fabMini?t.value:{};return void 0!==e.padding?Object.assign({},n,{padding:e.padding.split(/\s+/).map((e=>e in z?z[e]+"px":e)).join(" "),minWidth:"0",minHeight:"0"}):n})),c=s((()=>!0===e.rounded||!0===e.fab||!0===e.fabMini)),d=s((()=>!0!==e.disable&&!0!==e.loading)),v=s((()=>!0===d.value?e.tabindex||0:-1)),p=s((()=>Ee(e,"standard"))),b=s((()=>{const t={tabindex:v.value};return!0===l.value?Object.assign(t,i.value):!0===pe.includes(e.type)&&(t.type=e.type),"a"===o.value?(!0===e.disable?t["aria-disabled"]="true":void 0===t.href&&(t.role="button"),!0!==a.value&&!0===qe.test(e.type)&&(t.type=e.type)):!0===e.disable&&(t.disabled="",t["aria-disabled"]="true"),!0===e.loading&&void 0!==e.percentage&&Object.assign(t,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":e.percentage}),t}));return{classes:s((()=>{let t;void 0!==e.color?t=!0===e.flat||!0===e.outline?`text-${e.textColor||e.color}`:`bg-${e.color} text-${e.textColor||"white"}`:e.textColor&&(t=`text-${e.textColor}`);const n=!0===e.round?"round":"rectangle"+(!0===c.value?" q-btn--rounded":!0===e.square?" q-btn--square":"");return`q-btn--${p.value} q-btn--${n}`+(void 0!==t?" "+t:"")+(!0===d.value?" q-btn--actionable q-focusable q-hoverable":!0===e.disable?" disabled":"")+(!0===e.fab?" q-btn--fab":!0===e.fabMini?" q-btn--fab-mini":"")+(!0===e.noCaps?" q-btn--no-uppercase":"")+(!0===e.dense?" q-btn--dense":"")+(!0===e.stretch?" no-border-radius self-stretch":"")+(!0===e.glossy?" glossy":"")+(e.square?" q-btn--square":"")})),style:u,innerClasses:s((()=>n.value+(!0===e.stack?" column":" row")+(!0===e.noWrap?" no-wrap text-no-wrap":"")+(!0===e.loading?" q-btn__content--hidden":""))),attributes:b,hasLink:l,linkTag:o,navigateOnClick:r,isActionable:d}}const{passiveCapture:v}=te;let L=null,w=null,$=null;const Me=ee({name:"QBtn",props:{...Le,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(e,{slots:t,emit:n}){const{proxy:a}=ne(),{classes:l,style:o,innerClasses:i,attributes:r,hasLink:u,linkTag:c,navigateOnClick:d,isActionable:p}=we(e),f=j(null),m=j(null);let g,y=null,h=null;const k=s((()=>void 0!==e.label&&null!==e.label&&""!==e.label)),q=s((()=>!0!==e.disable&&!1!==e.ripple&&{keyCodes:!0===u.value?[13,32]:[13],...!0===e.ripple?{}:e.ripple})),x=s((()=>({center:e.round}))),E=s((()=>{const t=Math.max(0,Math.min(100,e.percentage));return t>0?{transition:"transform 0.6s",transform:`translateX(${t-100}%)`}:{}})),_=s((()=>{if(!0===e.loading)return{onMousedown:N,onTouchstart:N,onClick:N,onKeydown:N,onKeyup:N};if(!0===p.value){const t={onClick:S,onKeydown:T,onMousedown:P};if(!0===a.$q.platform.has.touch){t[`onTouchstart${void 0!==e.onTouchstart?"":"Passive"}`]=M}return t}return{onClick:C}})),B=s((()=>({ref:f,class:"q-btn q-btn-item non-selectable no-outline "+l.value,style:o.value,...r.value,..._.value})));function S(t){if(null!==f.value){if(void 0!==t){if(!0===t.defaultPrevented)return;const n=document.activeElement;if("submit"===e.type&&n!==document.body&&!1===f.value.contains(n)&&!1===n.contains(f.value)){!0!==t.qAvoidFocus&&f.value.focus();const e=()=>{var t;document.removeEventListener("keydown",C,!0),document.removeEventListener("keyup",e,v),null==(t=f.value)||t.removeEventListener("blur",e,v)};document.addEventListener("keydown",C,!0),document.addEventListener("keyup",e,v),f.value.addEventListener("blur",e,v)}}d(t)}}function T(e){null!==f.value&&(n("keydown",e),!0===O(e,[13,32])&&w!==f.value&&(null!==w&&A(),!0!==e.defaultPrevented&&(!0!==e.qAvoidFocus&&f.value.focus(),w=f.value,f.value.classList.add("q-btn--active"),document.addEventListener("keyup",R,!0),f.value.addEventListener("blur",R,v)),C(e)))}function M(e){null!==f.value&&(n("touchstart",e),!0!==e.defaultPrevented&&(L!==f.value&&(null!==L&&A(),L=f.value,y=e.target,y.addEventListener("touchcancel",R,v),y.addEventListener("touchend",R,v)),g=!0,null!==h&&clearTimeout(h),h=setTimeout((()=>{h=null,g=!1}),200)))}function P(e){null!==f.value&&(e.qSkipRipple=!0===g,n("mousedown",e),!0!==e.defaultPrevented&&$!==f.value&&(null!==$&&A(),$=f.value,f.value.classList.add("q-btn--active"),document.addEventListener("mouseup",R,v)))}function R(e){if(null!==f.value&&("blur"!==(null==e?void 0:e.type)||document.activeElement!==f.value)){if("keyup"===(null==e?void 0:e.type)){if(w===f.value&&!0===O(e,[13,32])){const t=new MouseEvent("click",e);t.qKeyEvent=!0,!0===e.defaultPrevented&&ae(t),!0===e.cancelBubble&&D(t),f.value.dispatchEvent(t),C(e),e.qKeyEvent=!0}n("keyup",e)}A()}}function A(e){var t,n;const a=m.value;!0!==e&&(L===f.value||$===f.value)&&null!==a&&a!==document.activeElement&&(a.setAttribute("tabindex",-1),a.focus()),L===f.value&&(null!==y&&(y.removeEventListener("touchcancel",R,v),y.removeEventListener("touchend",R,v)),L=y=null),$===f.value&&(document.removeEventListener("mouseup",R,v),$=null),w===f.value&&(document.removeEventListener("keyup",R,!0),null==(t=f.value)||t.removeEventListener("blur",R,v),w=null),null==(n=f.value)||n.classList.remove("q-btn--active")}function N(e){C(e),e.qSkipRipple=!0}return le((()=>{A(!0)})),Object.assign(a,{click:e=>{!0===p.value&&S(e)}}),()=>{let n=[];void 0!==e.icon&&n.push(b(K,{name:e.icon,left:!0!==e.stack&&!0===k.value,role:"img"})),!0===k.value&&n.push(b("span",{class:"block"},[e.label])),n=fe(t.default,n),void 0!==e.iconRight&&!1===e.round&&n.push(b(K,{name:e.iconRight,right:!0!==e.stack&&!0===k.value,role:"img"}));const a=[b("span",{class:"q-focus-helper",ref:m})];return!0===e.loading&&void 0!==e.percentage&&a.push(b("span",{class:"q-btn__progress absolute-full overflow-hidden"+(!0===e.darkPercentage?" q-btn__progress--dark":"")},[b("span",{class:"q-btn__progress-indicator fit block",style:E.value})])),a.push(b("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+i.value},n)),null!==e.loading&&a.push(b(ue,{name:"q-transition--fade"},(()=>!0===e.loading?[b("span",{key:"loading",class:"absolute-full flex flex-center"},void 0!==t.loading?t.loading():[b(ie)])]:null))),re(b(c.value,B.value,a),[[me,q.value,void 0,x.value]])}}});export{Me as Q,ve as c,Pe as g};
